<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.28.3">
    <meta name="project" content="Glific v4.3.0">

    <title>Glific.Contacts â€” Glific v4.3.0</title>
    <link rel="stylesheet" href="dist/elixir-d5ff82e6b0f5651c0ac0.css" />

    <script src="dist/sidebar_items-45c50d407b.js"></script>

      <script src="docs_config.js"></script>

    <script async src="dist/app-a088a6cc33ae3464193e.js"></script>


  </head>
  <body data-type="modules">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>

<div class="main">


<section class="sidebar">
  <button class="sidebar-button sidebar-toggle" aria-label="toggle sidebar">
    <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
  </button>

  <form class="sidebar-search" action="search.html">
    <button type="submit" class="search-button" aria-label="Submit Search">
      <i class="ri-search-2-line" aria-hidden="true" title="Submit search"></i>
    </button>
    <button type="button" tabindex="-1" class="search-close-button" aria-label="Cancel Search">
      <i class="ri-close-line ri-lg" aria-hidden="true" title="Cancel search"></i>
    </button>
    <label class="search-label">
      <p class="sr-only">Search</p>
      <input name="q" type="text" class="search-input" placeholder="Search..." aria-label="Input your search terms" autocomplete="off" />
    </label>
  </form>

  <div class="autocomplete">
    <div class="autocomplete-results">
    </div>
  </div>

  <div class="sidebar-header">

    <div class="sidebar-projectDetails">
      <a href="https://glific.io" class="sidebar-projectName" translate="no">
Glific
      </a>
      <strong class="sidebar-projectVersion" translate="no">
        v4.3.0
      </strong>
    </div>
    <ul class="sidebar-listNav">
      <li><a id="extras-list-link" href="#full-list">Pages</a></li>

        <li><a id="modules-list-link" href="#full-list">Modules</a></li>


    </ul>
  </div>

  <div class="gradient"></div>
  <ul id="full-list" class="sidebar-fullList"></ul>
</section>

<section class="content">
  <div class="content-outer">
    <div id="content" class="content-inner">

<h1>
<button class="settings display-settings">
  <i class="ri-settings-3-line"></i>
  <span class="sr-only">Settings</span>
</button>


    <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L1" title="View Source" class="view-source" rel="help">
      <i class="ri-code-s-slash-line" aria-hidden="true"></i>
      <span class="sr-only">View Source</span>
    </a>

  <span translate="no">Glific.Contacts</span> 
  <small class="app-vsn" translate="no">(Glific v4.3.0)</small>

</h1>


  <section id="moduledoc">
<p>The Contacts context.</p>
  </section>


  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
        <span class="sr-only">Link to this section</span>
      </a>
      Summary
    </h1>

  <div class="summary-types summary">
    <h2>
      <a href="#types">Types</a>
    </h2>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#t:option/0" translate="no">option()</a>

        </div>

          <div class="summary-synopsis"><p>Options that may be passed to a request function. See <a href="#request/2"><code class="inline">request/2</code></a> for detailed descriptions.</p></div>

      </div>

  </div>

  <div class="summary-functions summary">
    <h2>
      <a href="#functions">Functions</a>
    </h2>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#add_permission/2" translate="no">add_permission(query, user)</a>

        </div>

          <div class="summary-synopsis"><p>Add permissioning specific to groups, in this case we want to restrict the visibility of
groups that the user can see</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#can_send_message_to?/1" translate="no">can_send_message_to?(contact)</a>

        </div>

          <div class="summary-synopsis"><p>Check if we can send a message to the contact</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#can_send_message_to?/2" translate="no">can_send_message_to?(contact, is_hsm)</a>

        </div>

          <div class="summary-synopsis"><p>Check if we can send a session message to the contact</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#can_send_message_to?/3" translate="no">can_send_message_to?(contact, is_hsm, attrs)</a>

        </div>

          <div class="summary-synopsis"><p>Check if we can send a session message to the contact with some extra perameters
Specifically designed for when we are trying to optin an opted out contact</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#capture_history/3" translate="no">capture_history(contact_id, event_type, attrs)</a>

        </div>

          <div class="summary-synopsis"><p>create new contact histroy record.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#change_contact/2" translate="no">change_contact(contact, attrs \\ %{})</a>

        </div>

          <div class="summary-synopsis"><p>Returns an <code class="inline">%Ecto.Changeset{}</code> for tracking contact changes.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#contact_location/1" translate="no">contact_location(contact)</a>

        </div>

          <div class="summary-synopsis"><p>Get contact's current location</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#contact_opted_in/4" translate="no">contact_opted_in(contact_attrs, organization_id, utc_time, opts \\ [])</a>

        </div>

          <div class="summary-synopsis"><p>Update DB fields when contact opted in and ignore if it's blocked</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#contact_opted_out/4" translate="no">contact_opted_out(phone, organization_id, utc_time, method \\ &quot;Glific Flows&quot;)</a>

        </div>

          <div class="summary-synopsis"><p>Update DB fields when contact opted out</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#count_contact_history/1" translate="no">count_contact_history(args)</a>

        </div>

          <div class="summary-synopsis"><p>count contact history</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#count_contacts/1" translate="no">count_contacts(args)</a>

        </div>

          <div class="summary-synopsis"><p>Return the count of contacts, using the same filter as list_contacts</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#create_contact/1" translate="no">create_contact(attrs)</a>

        </div>

          <div class="summary-synopsis"><p>Creates a contact.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#create_location/1" translate="no">create_location(attrs \\ %{})</a>

        </div>

          <div class="summary-synopsis"><p>Creates a location.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#delete!/3" translate="no">delete!(client, url, opts)</a>

        </div>

          <div class="summary-synopsis"><p>Perform a DELETE request.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#delete/3" translate="no">delete(client, url, opts)</a>

        </div>

          <div class="summary-synopsis"><p>Perform a DELETE request.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#delete_contact/1" translate="no">delete_contact(contact)</a>

        </div>

          <div class="summary-synopsis"><p>Deletes a contact.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#get!/3" translate="no">get!(client, url, opts)</a>

        </div>

          <div class="summary-synopsis"><p>Perform a GET request.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#get/3" translate="no">get(client, url, opts)</a>

        </div>

          <div class="summary-synopsis"><p>Perform a GET request.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#get_contact!/1" translate="no">get_contact!(id)</a>

        </div>

          <div class="summary-synopsis"><p>Gets a single contact.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#get_contact_field_map/1" translate="no">get_contact_field_map(contact_id)</a>

        </div>

          <div class="summary-synopsis"><p>Convert contact field to map for variable substitution</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#head!/3" translate="no">head!(client, url, opts)</a>

        </div>

          <div class="summary-synopsis"><p>Perform a HEAD request.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#head/3" translate="no">head(client, url, opts)</a>

        </div>

          <div class="summary-synopsis"><p>Perform a HEAD request.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#is_contact_blocked?/1" translate="no">is_contact_blocked?(contact)</a>

        </div>

          <div class="summary-synopsis"><p>check if contact is blocked or not</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#is_new_contact/1" translate="no">is_new_contact(contact_id)</a>

        </div>

          <div class="summary-synopsis"><p>Check if this contact id is a new contact.
In general, we should always retrive as little as possible from the DB</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#is_simulator_contact?/1" translate="no">is_simulator_contact?(phone)</a>

        </div>

          <div class="summary-synopsis"><p>Lets centralize the code to detect simulator messages and interaction</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#list_contact_history/1" translate="no">list_contact_history(args)</a>

        </div>

          <div class="summary-synopsis"><p>Get contact history</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#list_contacts/1" translate="no">list_contacts(args)</a>

        </div>

          <div class="summary-synopsis"><p>Returns the list of contacts.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#list_user_contacts/1" translate="no">list_user_contacts(args \\ %{})</a>

        </div>

          <div class="summary-synopsis"><p>Return the list of contacts who are also users</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#maybe_create_contact/1" translate="no">maybe_create_contact(sender)</a>

        </div>

          <div class="summary-synopsis"><p>This function is called by the messaging framework for all incoming messages, hence
might be a good candidate to maintain a contact level cache at some point</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#number_does_not_exist/2" translate="no">number_does_not_exist(contact_id, method \\ &quot;Number does not exist&quot;)</a>

        </div>

          <div class="summary-synopsis"><p>Opt out a contact if the provider returns an error code about Number not
exisiting or not on whatsapp</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#optin_contact/1" translate="no">optin_contact(attrs)</a>

        </div>

          <div class="summary-synopsis"><p>Upload a contact phone as opted in</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#options!/3" translate="no">options!(client, url, opts)</a>

        </div>

          <div class="summary-synopsis"><p>Perform a OPTIONS request.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#options/3" translate="no">options(client, url, opts)</a>

        </div>

          <div class="summary-synopsis"><p>Perform a OPTIONS request.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#patch!/4" translate="no">patch!(client, url, body, opts)</a>

        </div>

          <div class="summary-synopsis"><p>Perform a PATCH request.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#patch/4" translate="no">patch(client, url, body, opts)</a>

        </div>

          <div class="summary-synopsis"><p>Perform a PATCH request.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#post!/4" translate="no">post!(client, url, body, opts)</a>

        </div>

          <div class="summary-synopsis"><p>Perform a POST request.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#post/4" translate="no">post(client, url, body, opts)</a>

        </div>

          <div class="summary-synopsis"><p>Perform a POST request.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#put!/4" translate="no">put!(client, url, body, opts)</a>

        </div>

          <div class="summary-synopsis"><p>Perform a PUT request.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#put/4" translate="no">put(client, url, body, opts)</a>

        </div>

          <div class="summary-synopsis"><p>Perform a PUT request.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#request!/2" translate="no">request!(client \\ %Tesla.Client{}, options)</a>

        </div>

          <div class="summary-synopsis"><p>Perform request and raise in case of error.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#request/2" translate="no">request(client \\ %Tesla.Client{}, options)</a>

        </div>

          <div class="summary-synopsis"><p>Perform a request.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#set_session_status/2" translate="no">set_session_status(contact, status)</a>

        </div>

          <div class="summary-synopsis"><p>Set session status for opted in and opted out contacts</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#trace!/3" translate="no">trace!(client, url, opts)</a>

        </div>

          <div class="summary-synopsis"><p>Perform a TRACE request.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#trace/3" translate="no">trace(client, url, opts)</a>

        </div>

          <div class="summary-synopsis"><p>Perform a TRACE request.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#update_contact/2" translate="no">update_contact(contact, attrs)</a>

        </div>

          <div class="summary-synopsis"><p>Updates a contact.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#update_contact_status/2" translate="no">update_contact_status(organization_id, args)</a>

        </div>

          <div class="summary-synopsis"><p>Invoked from cron jobs to mass update the status of contacts belonging to
a specific organization</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#upsert/1" translate="no">upsert(attrs)</a>

        </div>

          <div class="summary-synopsis"><p>Gets or Creates a Contact based on the unique indexes in the table. If there is a match
it returns the existing contact, else it creates a new one</p></div>

      </div>

  </div>

  </section>


  <section id="types" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#types">
        <i class="ri-link-m" aria-hidden="true"></i>
        <span class="sr-only">Link to this section</span>
      </a>
Types
    </h1>
    <div class="types-list">
<section class="detail" id="t:option/0">

  <div class="detail-header">
    <a href="#t:option/0" class="detail-link" title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">option()</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L8" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> option() ::
  {:method, <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:method/0">Tesla.Env.method</a>()}
  | {:url, <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:url/0">Tesla.Env.url</a>()}
  | {:query, <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:query/0">Tesla.Env.query</a>()}
  | {:headers, <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:headers/0">Tesla.Env.headers</a>()}
  | {:body, <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:body/0">Tesla.Env.body</a>()}
  | {:opts, <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:opts/0">Tesla.Env.opts</a>()}</pre>

      </div>

<p>Options that may be passed to a request function. See <a href="#request/2"><code class="inline">request/2</code></a> for detailed descriptions.</p>
  </section>
</section>

    </div>
  </section>

  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
        <span class="sr-only">Link to this section</span>
      </a>
Functions
    </h1>
    <div class="functions-list">
<section class="detail" id="add_permission/2">

  <div class="detail-header">
    <a href="#add_permission/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">add_permission(query, user)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L35" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> add_permission(<a href="https://hexdocs.pm/ecto/3.7.2/Ecto.Query.html#t:t/0">Ecto.Query.t</a>(), Glific.Users.User.t()) :: <a href="https://hexdocs.pm/ecto/3.7.2/Ecto.Query.html#t:t/0">Ecto.Query.t</a>()</pre>

      </div>

<p>Add permissioning specific to groups, in this case we want to restrict the visibility of
groups that the user can see</p>
  </section>
</section>
<section class="detail" id="can_send_message_to?/1">

  <div class="detail-header">
    <a href="#can_send_message_to?/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">can_send_message_to?(contact)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L506" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> can_send_message_to?(<a href="Glific.Contacts.Contact.html#t:t/0">Glific.Contacts.Contact.t</a>()) ::
  {:ok | :error, <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>() | nil}</pre>

      </div>

<p>Check if we can send a message to the contact</p>
  </section>
</section>
<section class="detail" id="can_send_message_to?/2">

  <div class="detail-header">
    <a href="#can_send_message_to?/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">can_send_message_to?(contact, is_hsm)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L510" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> can_send_message_to?(<a href="Glific.Contacts.Contact.html#t:t/0">Glific.Contacts.Contact.t</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">boolean</a>()) ::
  {:ok | :error, <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>() | nil}</pre>

      </div>

<p>Check if we can send a session message to the contact</p>
  </section>
</section>
<section class="detail" id="can_send_message_to?/3">

  <div class="detail-header">
    <a href="#can_send_message_to?/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">can_send_message_to?(contact, is_hsm, attrs)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L561" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> can_send_message_to?(<a href="Glific.Contacts.Contact.html#t:t/0">Glific.Contacts.Contact.t</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">boolean</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()) ::
  {:ok | :error, <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>() | nil}</pre>

      </div>

<p>Check if we can send a session message to the contact with some extra perameters
Specifically designed for when we are trying to optin an opted out contact</p>
  </section>
</section>
<section class="detail" id="capture_history/3">

  <div class="detail-header">
    <a href="#capture_history/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">capture_history(contact_id, event_type, attrs)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L760" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> capture_history(<a href="Glific.Contacts.Contact.html#t:t/0">Glific.Contacts.Contact.t</a>() | <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">non_neg_integer</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()) ::
  {:ok, <a href="Glific.Contacts.ContactHistory.html#t:t/0">Glific.Contacts.ContactHistory.t</a>()} | {:error, <a href="https://hexdocs.pm/ecto/3.7.2/Ecto.Changeset.html#t:t/0">Ecto.Changeset.t</a>()}</pre>

      </div>

<p>create new contact histroy record.</p>
  </section>
</section>
<section class="detail" id="change_contact/2">

    <span id="change_contact/1"></span>

  <div class="detail-header">
    <a href="#change_contact/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">change_contact(contact, attrs \\ %{})</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L288" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> change_contact(<a href="Glific.Contacts.Contact.html#t:t/0">Glific.Contacts.Contact.t</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()) :: <a href="https://hexdocs.pm/ecto/3.7.2/Ecto.Changeset.html#t:t/0">Ecto.Changeset.t</a>()</pre>

      </div>

<p>Returns an <code class="inline">%Ecto.Changeset{}</code> for tracking contact changes.</p><h2 id="change_contact/2-examples" class="section-heading">
  <a href="#change_contact/2-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">examples</p>
  </a>
  Examples
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">change_contact</span><span class="p" data-group-id="3620940562-1">(</span><span class="n">contact</span><span class="p" data-group-id="3620940562-1">)</span><span class="w">
</span><span class="p" data-group-id="3620940562-2">%</span><span class="nc" data-group-id="3620940562-2">Ecto.Changeset</span><span class="p" data-group-id="3620940562-2">{</span><span class="ss">data</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3620940562-3">%</span><span class="nc" data-group-id="3620940562-3">Contact</span><span class="p" data-group-id="3620940562-3">{</span><span class="p" data-group-id="3620940562-3">}</span><span class="p" data-group-id="3620940562-2">}</span></code></pre>
  </section>
</section>
<section class="detail" id="contact_location/1">

  <div class="detail-header">
    <a href="#contact_location/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">contact_location(contact)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L583" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> contact_location(<a href="Glific.Contacts.Contact.html#t:t/0">Glific.Contacts.Contact.t</a>()) ::
  {:ok, <a href="Glific.Contacts.Location.html#t:t/0">Glific.Contacts.Location.t</a>()}</pre>

      </div>

<p>Get contact's current location</p>
  </section>
</section>
<section class="detail" id="contact_opted_in/4">

    <span id="contact_opted_in/3"></span>

  <div class="detail-header">
    <a href="#contact_opted_in/4" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">contact_opted_in(contact_attrs, organization_id, utc_time, opts \\ [])</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L378" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> contact_opted_in(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">non_neg_integer</a>(), <a href="https://hexdocs.pm/elixir/DateTime.html#t:t/0">DateTime.t</a>(), <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>()) ::
  {:ok, <a href="Glific.Contacts.Contact.html#t:t/0">Glific.Contacts.Contact.t</a>()} | {:error, <a href="https://hexdocs.pm/ecto/3.7.2/Ecto.Changeset.html#t:t/0">Ecto.Changeset.t</a>()}</pre>

      </div>

<p>Update DB fields when contact opted in and ignore if it's blocked</p>
  </section>
</section>
<section class="detail" id="contact_opted_out/4">

    <span id="contact_opted_out/3"></span>

  <div class="detail-header">
    <a href="#contact_opted_out/4" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">contact_opted_out(phone, organization_id, utc_time, method \\ &quot;Glific Flows&quot;)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L455" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> contact_opted_out(<a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">non_neg_integer</a>(), <a href="https://hexdocs.pm/elixir/DateTime.html#t:t/0">DateTime.t</a>(), <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>()) ::
  :ok | :error</pre>

      </div>

<p>Update DB fields when contact opted out</p>
  </section>
</section>
<section class="detail" id="count_contact_history/1">

  <div class="detail-header">
    <a href="#count_contact_history/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">count_contact_history(args)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L806" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> count_contact_history(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()) :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">integer</a>()</pre>

      </div>

<p>count contact history</p>
  </section>
</section>
<section class="detail" id="count_contacts/1">

  <div class="detail-header">
    <a href="#count_contacts/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">count_contacts(args)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L87" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> count_contacts(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()) :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">integer</a>()</pre>

      </div>

<p>Return the count of contacts, using the same filter as list_contacts</p>
  </section>
</section>
<section class="detail" id="create_contact/1">

  <div class="detail-header">
    <a href="#create_contact/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">create_contact(attrs)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L204" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> create_contact(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()) ::
  {:ok, <a href="Glific.Contacts.Contact.html#t:t/0">Glific.Contacts.Contact.t</a>()} | {:error, <a href="https://hexdocs.pm/ecto/3.7.2/Ecto.Changeset.html#t:t/0">Ecto.Changeset.t</a>()}</pre>

      </div>

<p>Creates a contact.</p><h2 id="create_contact/1-examples" class="section-heading">
  <a href="#create_contact/1-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">examples</p>
  </a>
  Examples
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">create_contact</span><span class="p" data-group-id="2591764971-1">(</span><span class="p" data-group-id="2591764971-2">%{</span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="n">value</span><span class="p" data-group-id="2591764971-2">}</span><span class="p" data-group-id="2591764971-1">)</span><span class="w">
</span><span class="p" data-group-id="2591764971-3">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2591764971-4">%</span><span class="nc" data-group-id="2591764971-4">Contact</span><span class="p" data-group-id="2591764971-4">{</span><span class="p" data-group-id="2591764971-4">}</span><span class="p" data-group-id="2591764971-3">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">create_contact</span><span class="p" data-group-id="2591764971-5">(</span><span class="p" data-group-id="2591764971-6">%{</span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="n">bad_value</span><span class="p" data-group-id="2591764971-6">}</span><span class="p" data-group-id="2591764971-5">)</span><span class="w">
</span><span class="p" data-group-id="2591764971-7">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2591764971-8">%</span><span class="nc" data-group-id="2591764971-8">Ecto.Changeset</span><span class="p" data-group-id="2591764971-8">{</span><span class="p" data-group-id="2591764971-8">}</span><span class="p" data-group-id="2591764971-7">}</span></code></pre>
  </section>
</section>
<section class="detail" id="create_location/1">

    <span id="create_location/0"></span>

  <div class="detail-header">
    <a href="#create_location/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">create_location(attrs \\ %{})</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L604" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> create_location(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()) ::
  {:ok, <a href="Glific.Contacts.Location.html#t:t/0">Glific.Contacts.Location.t</a>()} | {:error, <a href="https://hexdocs.pm/ecto/3.7.2/Ecto.Changeset.html#t:t/0">Ecto.Changeset.t</a>()}</pre>

      </div>

<p>Creates a location.</p><h2 id="create_location/1-examples" class="section-heading">
  <a href="#create_location/1-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">examples</p>
  </a>
  Examples
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="nc">Glific.Contacts</span><span class="o">.</span><span class="n">create_location</span><span class="p" data-group-id="3896627439-1">(</span><span class="p" data-group-id="3896627439-2">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">value</span><span class="p" data-group-id="3896627439-2">}</span><span class="p" data-group-id="3896627439-1">)</span><span class="w">
</span><span class="p" data-group-id="3896627439-3">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3896627439-4">%</span><span class="nc" data-group-id="3896627439-4">Glific.Contacts.Location</span><span class="p" data-group-id="3896627439-4">{</span><span class="p" data-group-id="3896627439-4">}</span><span class="p" data-group-id="3896627439-3">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="nc">Glific.Contacts</span><span class="o">.</span><span class="n">create_location</span><span class="p" data-group-id="3896627439-5">(</span><span class="p" data-group-id="3896627439-6">%{</span><span class="ss">bad_field</span><span class="p">:</span><span class="w"> </span><span class="n">bad_value</span><span class="p" data-group-id="3896627439-6">}</span><span class="p" data-group-id="3896627439-5">)</span><span class="w">
</span><span class="p" data-group-id="3896627439-7">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3896627439-8">%</span><span class="nc" data-group-id="3896627439-8">Ecto.Changeset</span><span class="p" data-group-id="3896627439-8">{</span><span class="p" data-group-id="3896627439-8">}</span><span class="p" data-group-id="3896627439-7">}</span></code></pre>
  </section>
</section>
<section class="detail" id="delete!/3">

  <div class="detail-header">
    <a href="#delete!/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">delete!(client, url, opts)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L8" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> delete!(<a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:client/0">Tesla.Env.client</a>(), <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:url/0">Tesla.Env.url</a>(), [<a href="#t:option/0">option</a>()]) ::
  <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:t/0">Tesla.Env.t</a>() | <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">no_return</a>()</pre>

      </div>

<p>Perform a DELETE request.</p><p>See <a href="#request!/1"><code class="inline">request!/1</code></a> or <a href="#request!/2"><code class="inline">request!/2</code></a> for options definition.</p><pre><code class="makeup elixir" translate="no"><span class="n">delete!</span><span class="p" data-group-id="9816865755-1">(</span><span class="s">&quot;/users&quot;</span><span class="p" data-group-id="9816865755-1">)</span><span class="w">
</span><span class="n">delete!</span><span class="p" data-group-id="9816865755-2">(</span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9816865755-3">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="9816865755-3">]</span><span class="p" data-group-id="9816865755-2">)</span><span class="w">
</span><span class="n">delete!</span><span class="p" data-group-id="9816865755-4">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p" data-group-id="9816865755-4">)</span><span class="w">
</span><span class="n">delete!</span><span class="p" data-group-id="9816865755-5">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9816865755-6">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="9816865755-6">]</span><span class="p" data-group-id="9816865755-5">)</span><span class="w">
</span><span class="n">delete!</span><span class="p" data-group-id="9816865755-7">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">body</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9816865755-8">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="9816865755-8">}</span><span class="p" data-group-id="9816865755-7">)</span></code></pre>
  </section>
</section>
<section class="detail" id="delete/3">

  <div class="detail-header">
    <a href="#delete/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">delete(client, url, opts)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L8" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> delete(<a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:client/0">Tesla.Env.client</a>(), <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:url/0">Tesla.Env.url</a>(), [<a href="#t:option/0">option</a>()]) :: <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:result/0">Tesla.Env.result</a>()</pre>

      </div>

<p>Perform a DELETE request.</p><p>See <a href="#request/1"><code class="inline">request/1</code></a> or <a href="#request/2"><code class="inline">request/2</code></a> for options definition.</p><pre><code class="makeup elixir" translate="no"><span class="n">delete</span><span class="p" data-group-id="1933483533-1">(</span><span class="s">&quot;/users&quot;</span><span class="p" data-group-id="1933483533-1">)</span><span class="w">
</span><span class="n">delete</span><span class="p" data-group-id="1933483533-2">(</span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1933483533-3">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="1933483533-3">]</span><span class="p" data-group-id="1933483533-2">)</span><span class="w">
</span><span class="n">delete</span><span class="p" data-group-id="1933483533-4">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p" data-group-id="1933483533-4">)</span><span class="w">
</span><span class="n">delete</span><span class="p" data-group-id="1933483533-5">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1933483533-6">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="1933483533-6">]</span><span class="p" data-group-id="1933483533-5">)</span><span class="w">
</span><span class="n">delete</span><span class="p" data-group-id="1933483533-7">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">body</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1933483533-8">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="1933483533-8">}</span><span class="p" data-group-id="1933483533-7">)</span></code></pre>
  </section>
</section>
<section class="detail" id="delete_contact/1">

  <div class="detail-header">
    <a href="#delete_contact/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">delete_contact(contact)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L272" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> delete_contact(<a href="Glific.Contacts.Contact.html#t:t/0">Glific.Contacts.Contact.t</a>()) ::
  {:ok, <a href="Glific.Contacts.Contact.html#t:t/0">Glific.Contacts.Contact.t</a>()} | {:error, <a href="https://hexdocs.pm/ecto/3.7.2/Ecto.Changeset.html#t:t/0">Ecto.Changeset.t</a>()}</pre>

      </div>

<p>Deletes a contact.</p><h2 id="delete_contact/1-examples" class="section-heading">
  <a href="#delete_contact/1-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">examples</p>
  </a>
  Examples
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">delete_contact</span><span class="p" data-group-id="5831932474-1">(</span><span class="n">contact</span><span class="p" data-group-id="5831932474-1">)</span><span class="w">
</span><span class="p" data-group-id="5831932474-2">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5831932474-3">%</span><span class="nc" data-group-id="5831932474-3">Contact</span><span class="p" data-group-id="5831932474-3">{</span><span class="p" data-group-id="5831932474-3">}</span><span class="p" data-group-id="5831932474-2">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">delete_contact</span><span class="p" data-group-id="5831932474-4">(</span><span class="n">contact</span><span class="p" data-group-id="5831932474-4">)</span><span class="w">
</span><span class="p" data-group-id="5831932474-5">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5831932474-6">%</span><span class="nc" data-group-id="5831932474-6">Ecto.Changeset</span><span class="p" data-group-id="5831932474-6">{</span><span class="p" data-group-id="5831932474-6">}</span><span class="p" data-group-id="5831932474-5">}</span></code></pre>
  </section>
</section>
<section class="detail" id="get!/3">

  <div class="detail-header">
    <a href="#get!/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get!(client, url, opts)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L8" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> get!(<a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:client/0">Tesla.Env.client</a>(), <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:url/0">Tesla.Env.url</a>(), [<a href="#t:option/0">option</a>()]) ::
  <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:t/0">Tesla.Env.t</a>() | <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">no_return</a>()</pre>

      </div>

<p>Perform a GET request.</p><p>See <a href="#request!/1"><code class="inline">request!/1</code></a> or <a href="#request!/2"><code class="inline">request!/2</code></a> for options definition.</p><pre><code class="makeup elixir" translate="no"><span class="n">get!</span><span class="p" data-group-id="4620846275-1">(</span><span class="s">&quot;/users&quot;</span><span class="p" data-group-id="4620846275-1">)</span><span class="w">
</span><span class="n">get!</span><span class="p" data-group-id="4620846275-2">(</span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4620846275-3">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="4620846275-3">]</span><span class="p" data-group-id="4620846275-2">)</span><span class="w">
</span><span class="n">get!</span><span class="p" data-group-id="4620846275-4">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p" data-group-id="4620846275-4">)</span><span class="w">
</span><span class="n">get!</span><span class="p" data-group-id="4620846275-5">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4620846275-6">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="4620846275-6">]</span><span class="p" data-group-id="4620846275-5">)</span><span class="w">
</span><span class="n">get!</span><span class="p" data-group-id="4620846275-7">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">body</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4620846275-8">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="4620846275-8">}</span><span class="p" data-group-id="4620846275-7">)</span></code></pre>
  </section>
</section>
<section class="detail" id="get/3">

  <div class="detail-header">
    <a href="#get/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get(client, url, opts)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L8" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> get(<a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:client/0">Tesla.Env.client</a>(), <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:url/0">Tesla.Env.url</a>(), [<a href="#t:option/0">option</a>()]) :: <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:result/0">Tesla.Env.result</a>()</pre>

      </div>

<p>Perform a GET request.</p><p>See <a href="#request/1"><code class="inline">request/1</code></a> or <a href="#request/2"><code class="inline">request/2</code></a> for options definition.</p><pre><code class="makeup elixir" translate="no"><span class="n">get</span><span class="p" data-group-id="7254586185-1">(</span><span class="s">&quot;/users&quot;</span><span class="p" data-group-id="7254586185-1">)</span><span class="w">
</span><span class="n">get</span><span class="p" data-group-id="7254586185-2">(</span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7254586185-3">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="7254586185-3">]</span><span class="p" data-group-id="7254586185-2">)</span><span class="w">
</span><span class="n">get</span><span class="p" data-group-id="7254586185-4">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p" data-group-id="7254586185-4">)</span><span class="w">
</span><span class="n">get</span><span class="p" data-group-id="7254586185-5">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7254586185-6">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="7254586185-6">]</span><span class="p" data-group-id="7254586185-5">)</span><span class="w">
</span><span class="n">get</span><span class="p" data-group-id="7254586185-7">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">body</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7254586185-8">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="7254586185-8">}</span><span class="p" data-group-id="7254586185-7">)</span></code></pre>
  </section>
</section>
<section class="detail" id="get_contact!/1">

  <div class="detail-header">
    <a href="#get_contact!/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_contact!(id)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L184" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> get_contact!(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">integer</a>()) :: <a href="Glific.Contacts.Contact.html#t:t/0">Glific.Contacts.Contact.t</a>()</pre>

      </div>

<p>Gets a single contact.</p><p>Raises <a href="https://hexdocs.pm/ecto/3.7.2/Ecto.NoResultsError.html"><code class="inline">Ecto.NoResultsError</code></a> if the Contact does not exist.</p><h2 id="get_contact!/1-examples" class="section-heading">
  <a href="#get_contact!/1-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">examples</p>
  </a>
  Examples
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">get_contact!</span><span class="p" data-group-id="0413508718-1">(</span><span class="mi">123</span><span class="p" data-group-id="0413508718-1">)</span><span class="w">
</span><span class="p" data-group-id="0413508718-2">%</span><span class="nc" data-group-id="0413508718-2">Contact</span><span class="p" data-group-id="0413508718-2">{</span><span class="p" data-group-id="0413508718-2">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">get_contact!</span><span class="p" data-group-id="0413508718-3">(</span><span class="mi">456</span><span class="p" data-group-id="0413508718-3">)</span><span class="w">
</span><span class="gt">** (Ecto.NoResultsError)</span></code></pre>
  </section>
</section>
<section class="detail" id="get_contact_field_map/1">

  <div class="detail-header">
    <a href="#get_contact_field_map/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_contact_field_map(contact_id)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L705" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> get_contact_field_map(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">integer</a>()) :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()</pre>

      </div>

<p>Convert contact field to map for variable substitution</p>
  </section>
</section>
<section class="detail" id="head!/3">

  <div class="detail-header">
    <a href="#head!/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">head!(client, url, opts)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L8" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> head!(<a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:client/0">Tesla.Env.client</a>(), <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:url/0">Tesla.Env.url</a>(), [<a href="#t:option/0">option</a>()]) ::
  <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:t/0">Tesla.Env.t</a>() | <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">no_return</a>()</pre>

      </div>

<p>Perform a HEAD request.</p><p>See <a href="#request!/1"><code class="inline">request!/1</code></a> or <a href="#request!/2"><code class="inline">request!/2</code></a> for options definition.</p><pre><code class="makeup elixir" translate="no"><span class="n">head!</span><span class="p" data-group-id="9460984375-1">(</span><span class="s">&quot;/users&quot;</span><span class="p" data-group-id="9460984375-1">)</span><span class="w">
</span><span class="n">head!</span><span class="p" data-group-id="9460984375-2">(</span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9460984375-3">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="9460984375-3">]</span><span class="p" data-group-id="9460984375-2">)</span><span class="w">
</span><span class="n">head!</span><span class="p" data-group-id="9460984375-4">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p" data-group-id="9460984375-4">)</span><span class="w">
</span><span class="n">head!</span><span class="p" data-group-id="9460984375-5">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9460984375-6">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="9460984375-6">]</span><span class="p" data-group-id="9460984375-5">)</span><span class="w">
</span><span class="n">head!</span><span class="p" data-group-id="9460984375-7">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">body</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9460984375-8">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="9460984375-8">}</span><span class="p" data-group-id="9460984375-7">)</span></code></pre>
  </section>
</section>
<section class="detail" id="head/3">

  <div class="detail-header">
    <a href="#head/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">head(client, url, opts)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L8" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> head(<a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:client/0">Tesla.Env.client</a>(), <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:url/0">Tesla.Env.url</a>(), [<a href="#t:option/0">option</a>()]) :: <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:result/0">Tesla.Env.result</a>()</pre>

      </div>

<p>Perform a HEAD request.</p><p>See <a href="#request/1"><code class="inline">request/1</code></a> or <a href="#request/2"><code class="inline">request/2</code></a> for options definition.</p><pre><code class="makeup elixir" translate="no"><span class="n">head</span><span class="p" data-group-id="0375984437-1">(</span><span class="s">&quot;/users&quot;</span><span class="p" data-group-id="0375984437-1">)</span><span class="w">
</span><span class="n">head</span><span class="p" data-group-id="0375984437-2">(</span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="0375984437-3">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="0375984437-3">]</span><span class="p" data-group-id="0375984437-2">)</span><span class="w">
</span><span class="n">head</span><span class="p" data-group-id="0375984437-4">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p" data-group-id="0375984437-4">)</span><span class="w">
</span><span class="n">head</span><span class="p" data-group-id="0375984437-5">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="0375984437-6">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="0375984437-6">]</span><span class="p" data-group-id="0375984437-5">)</span><span class="w">
</span><span class="n">head</span><span class="p" data-group-id="0375984437-7">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">body</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="0375984437-8">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="0375984437-8">}</span><span class="p" data-group-id="0375984437-7">)</span></code></pre>
  </section>
</section>
<section class="detail" id="is_contact_blocked?/1">

  <div class="detail-header">
    <a href="#is_contact_blocked?/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">is_contact_blocked?(contact)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L677" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> is_contact_blocked?(<a href="Glific.Contacts.Contact.html#t:t/0">Glific.Contacts.Contact.t</a>()) :: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">boolean</a>()</pre>

      </div>

<p>check if contact is blocked or not</p>
  </section>
</section>
<section class="detail" id="is_new_contact/1">

  <div class="detail-header">
    <a href="#is_new_contact/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">is_new_contact(contact_id)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L361" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> is_new_contact(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">integer</a>()) :: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">boolean</a>()</pre>

      </div>

<p>Check if this contact id is a new contact.
In general, we should always retrive as little as possible from the DB</p>
  </section>
</section>
<section class="detail" id="is_simulator_contact?/1">

  <div class="detail-header">
    <a href="#is_simulator_contact?/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">is_simulator_contact?(phone)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L753" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> is_simulator_contact?(<a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>()) :: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">boolean</a>()</pre>

      </div>

<p>Lets centralize the code to detect simulator messages and interaction</p>
  </section>
</section>
<section class="detail" id="list_contact_history/1">

  <div class="detail-header">
    <a href="#list_contact_history/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">list_contact_history(args)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L792" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> list_contact_history(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()) :: [<a href="Glific.Contacts.ContactHistory.html#t:t/0">Glific.Contacts.ContactHistory.t</a>()]</pre>

      </div>

<p>Get contact history</p>
  </section>
</section>
<section class="detail" id="list_contacts/1">

  <div class="detail-header">
    <a href="#list_contacts/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">list_contacts(args)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L64" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> list_contacts(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()) :: [<a href="Glific.Contacts.Contact.html#t:t/0">Glific.Contacts.Contact.t</a>()]</pre>

      </div>

<p>Returns the list of contacts.</p><h2 id="list_contacts/1-examples" class="section-heading">
  <a href="#list_contacts/1-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">examples</p>
  </a>
  Examples
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">list_contacts</span><span class="p" data-group-id="2345971414-1">(</span><span class="p" data-group-id="2345971414-1">)</span><span class="w">
</span><span class="p" data-group-id="2345971414-2">[</span><span class="p" data-group-id="2345971414-3">%</span><span class="nc" data-group-id="2345971414-3">Contact</span><span class="p" data-group-id="2345971414-3">{</span><span class="p" data-group-id="2345971414-3">}</span><span class="p">,</span><span class="w"> </span><span class="n">...</span><span class="p" data-group-id="2345971414-2">]</span></code></pre><p>Get the list of contacts filtered by various search options
Include contacts only if within list of groups
Include contacts only if have list of tags</p>
  </section>
</section>
<section class="detail" id="list_user_contacts/1">

    <span id="list_user_contacts/0"></span>

  <div class="detail-header">
    <a href="#list_user_contacts/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">list_user_contacts(args \\ %{})</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L75" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> list_user_contacts(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()) :: [<a href="Glific.Contacts.Contact.html#t:t/0">Glific.Contacts.Contact.t</a>()]</pre>

      </div>

<p>Return the list of contacts who are also users</p>
  </section>
</section>
<section class="detail" id="maybe_create_contact/1">

  <div class="detail-header">
    <a href="#maybe_create_contact/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">maybe_create_contact(sender)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L335" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> maybe_create_contact(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()) ::
  {:ok, <a href="Glific.Contacts.Contact.html#t:t/0">Glific.Contacts.Contact.t</a>()} | {:error, <a href="https://hexdocs.pm/ecto/3.7.2/Ecto.Changeset.html#t:t/0">Ecto.Changeset.t</a>()}</pre>

      </div>

<p>This function is called by the messaging framework for all incoming messages, hence
might be a good candidate to maintain a contact level cache at some point</p><p>We use a fetch followed by create, to avoid the explosion in the id namespace. We also
avoid updating the contact to skip the DB call, and only do so if the name has changed</p>
  </section>
</section>
<section class="detail" id="number_does_not_exist/2">

    <span id="number_does_not_exist/1"></span>

  <div class="detail-header">
    <a href="#number_does_not_exist/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">number_does_not_exist(contact_id, method \\ &quot;Number does not exist&quot;)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L488" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> number_does_not_exist(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">non_neg_integer</a>(), <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>()) :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">any</a>()</pre>

      </div>

<p>Opt out a contact if the provider returns an error code about Number not
exisiting or not on whatsapp</p>
  </section>
</section>
<section class="detail" id="optin_contact/1">

  <div class="detail-header">
    <a href="#optin_contact/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">optin_contact(attrs)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L691" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> optin_contact(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()) ::
  {:ok, <a href="Glific.Contacts.Contact.html#t:t/0">Glific.Contacts.Contact.t</a>()}
  | {:error, <a href="https://hexdocs.pm/ecto/3.7.2/Ecto.Changeset.html#t:t/0">Ecto.Changeset.t</a>()}
  | {:error, <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>()}</pre>

      </div>

<p>Upload a contact phone as opted in</p>
  </section>
</section>
<section class="detail" id="options!/3">

  <div class="detail-header">
    <a href="#options!/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">options!(client, url, opts)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L8" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> options!(<a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:client/0">Tesla.Env.client</a>(), <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:url/0">Tesla.Env.url</a>(), [<a href="#t:option/0">option</a>()]) ::
  <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:t/0">Tesla.Env.t</a>() | <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">no_return</a>()</pre>

      </div>

<p>Perform a OPTIONS request.</p><p>See <a href="#request!/1"><code class="inline">request!/1</code></a> or <a href="#request!/2"><code class="inline">request!/2</code></a> for options definition.</p><pre><code class="makeup elixir" translate="no"><span class="n">options!</span><span class="p" data-group-id="6265945490-1">(</span><span class="s">&quot;/users&quot;</span><span class="p" data-group-id="6265945490-1">)</span><span class="w">
</span><span class="n">options!</span><span class="p" data-group-id="6265945490-2">(</span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6265945490-3">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="6265945490-3">]</span><span class="p" data-group-id="6265945490-2">)</span><span class="w">
</span><span class="n">options!</span><span class="p" data-group-id="6265945490-4">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p" data-group-id="6265945490-4">)</span><span class="w">
</span><span class="n">options!</span><span class="p" data-group-id="6265945490-5">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6265945490-6">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="6265945490-6">]</span><span class="p" data-group-id="6265945490-5">)</span><span class="w">
</span><span class="n">options!</span><span class="p" data-group-id="6265945490-7">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">body</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6265945490-8">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="6265945490-8">}</span><span class="p" data-group-id="6265945490-7">)</span></code></pre>
  </section>
</section>
<section class="detail" id="options/3">

  <div class="detail-header">
    <a href="#options/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">options(client, url, opts)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L8" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> options(<a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:client/0">Tesla.Env.client</a>(), <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:url/0">Tesla.Env.url</a>(), [<a href="#t:option/0">option</a>()]) :: <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:result/0">Tesla.Env.result</a>()</pre>

      </div>

<p>Perform a OPTIONS request.</p><p>See <a href="#request/1"><code class="inline">request/1</code></a> or <a href="#request/2"><code class="inline">request/2</code></a> for options definition.</p><pre><code class="makeup elixir" translate="no"><span class="n">options</span><span class="p" data-group-id="2790834121-1">(</span><span class="s">&quot;/users&quot;</span><span class="p" data-group-id="2790834121-1">)</span><span class="w">
</span><span class="n">options</span><span class="p" data-group-id="2790834121-2">(</span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2790834121-3">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="2790834121-3">]</span><span class="p" data-group-id="2790834121-2">)</span><span class="w">
</span><span class="n">options</span><span class="p" data-group-id="2790834121-4">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p" data-group-id="2790834121-4">)</span><span class="w">
</span><span class="n">options</span><span class="p" data-group-id="2790834121-5">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2790834121-6">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="2790834121-6">]</span><span class="p" data-group-id="2790834121-5">)</span><span class="w">
</span><span class="n">options</span><span class="p" data-group-id="2790834121-7">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">body</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2790834121-8">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="2790834121-8">}</span><span class="p" data-group-id="2790834121-7">)</span></code></pre>
  </section>
</section>
<section class="detail" id="patch!/4">

  <div class="detail-header">
    <a href="#patch!/4" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">patch!(client, url, body, opts)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L8" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> patch!(<a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:client/0">Tesla.Env.client</a>(), <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:url/0">Tesla.Env.url</a>(), <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:body/0">Tesla.Env.body</a>(), [<a href="#t:option/0">option</a>()]) ::
  <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:t/0">Tesla.Env.t</a>() | <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">no_return</a>()</pre>

      </div>

<p>Perform a PATCH request.</p><p>See <a href="#request!/1"><code class="inline">request!/1</code></a> or <a href="#request!/2"><code class="inline">request!/2</code></a> for options definition.</p><pre><code class="makeup elixir" translate="no"><span class="n">patch!</span><span class="p" data-group-id="6108261100-1">(</span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6108261100-2">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="6108261100-2">}</span><span class="p" data-group-id="6108261100-1">)</span><span class="w">
</span><span class="n">patch!</span><span class="p" data-group-id="6108261100-3">(</span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6108261100-4">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="6108261100-4">}</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6108261100-5">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="6108261100-5">]</span><span class="p" data-group-id="6108261100-3">)</span><span class="w">
</span><span class="n">patch!</span><span class="p" data-group-id="6108261100-6">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6108261100-7">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="6108261100-7">}</span><span class="p" data-group-id="6108261100-6">)</span><span class="w">
</span><span class="n">patch!</span><span class="p" data-group-id="6108261100-8">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6108261100-9">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="6108261100-9">}</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6108261100-10">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="6108261100-10">]</span><span class="p" data-group-id="6108261100-8">)</span></code></pre>
  </section>
</section>
<section class="detail" id="patch/4">

  <div class="detail-header">
    <a href="#patch/4" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">patch(client, url, body, opts)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L8" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> patch(<a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:client/0">Tesla.Env.client</a>(), <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:url/0">Tesla.Env.url</a>(), <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:body/0">Tesla.Env.body</a>(), [<a href="#t:option/0">option</a>()]) ::
  <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:result/0">Tesla.Env.result</a>()</pre>

      </div>

<p>Perform a PATCH request.</p><p>See <a href="#request/1"><code class="inline">request/1</code></a> or <a href="#request/2"><code class="inline">request/2</code></a> for options definition.</p><pre><code class="makeup elixir" translate="no"><span class="n">patch</span><span class="p" data-group-id="3364399605-1">(</span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3364399605-2">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="3364399605-2">}</span><span class="p" data-group-id="3364399605-1">)</span><span class="w">
</span><span class="n">patch</span><span class="p" data-group-id="3364399605-3">(</span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3364399605-4">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="3364399605-4">}</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3364399605-5">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="3364399605-5">]</span><span class="p" data-group-id="3364399605-3">)</span><span class="w">
</span><span class="n">patch</span><span class="p" data-group-id="3364399605-6">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3364399605-7">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="3364399605-7">}</span><span class="p" data-group-id="3364399605-6">)</span><span class="w">
</span><span class="n">patch</span><span class="p" data-group-id="3364399605-8">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3364399605-9">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="3364399605-9">}</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3364399605-10">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="3364399605-10">]</span><span class="p" data-group-id="3364399605-8">)</span></code></pre>
  </section>
</section>
<section class="detail" id="post!/4">

  <div class="detail-header">
    <a href="#post!/4" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">post!(client, url, body, opts)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L8" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> post!(<a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:client/0">Tesla.Env.client</a>(), <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:url/0">Tesla.Env.url</a>(), <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:body/0">Tesla.Env.body</a>(), [<a href="#t:option/0">option</a>()]) ::
  <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:t/0">Tesla.Env.t</a>() | <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">no_return</a>()</pre>

      </div>

<p>Perform a POST request.</p><p>See <a href="#request!/1"><code class="inline">request!/1</code></a> or <a href="#request!/2"><code class="inline">request!/2</code></a> for options definition.</p><pre><code class="makeup elixir" translate="no"><span class="n">post!</span><span class="p" data-group-id="0490851761-1">(</span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0490851761-2">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="0490851761-2">}</span><span class="p" data-group-id="0490851761-1">)</span><span class="w">
</span><span class="n">post!</span><span class="p" data-group-id="0490851761-3">(</span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0490851761-4">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="0490851761-4">}</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="0490851761-5">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="0490851761-5">]</span><span class="p" data-group-id="0490851761-3">)</span><span class="w">
</span><span class="n">post!</span><span class="p" data-group-id="0490851761-6">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0490851761-7">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="0490851761-7">}</span><span class="p" data-group-id="0490851761-6">)</span><span class="w">
</span><span class="n">post!</span><span class="p" data-group-id="0490851761-8">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0490851761-9">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="0490851761-9">}</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="0490851761-10">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="0490851761-10">]</span><span class="p" data-group-id="0490851761-8">)</span></code></pre>
  </section>
</section>
<section class="detail" id="post/4">

  <div class="detail-header">
    <a href="#post/4" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">post(client, url, body, opts)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L8" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> post(<a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:client/0">Tesla.Env.client</a>(), <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:url/0">Tesla.Env.url</a>(), <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:body/0">Tesla.Env.body</a>(), [<a href="#t:option/0">option</a>()]) ::
  <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:result/0">Tesla.Env.result</a>()</pre>

      </div>

<p>Perform a POST request.</p><p>See <a href="#request/1"><code class="inline">request/1</code></a> or <a href="#request/2"><code class="inline">request/2</code></a> for options definition.</p><pre><code class="makeup elixir" translate="no"><span class="n">post</span><span class="p" data-group-id="4410219404-1">(</span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4410219404-2">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="4410219404-2">}</span><span class="p" data-group-id="4410219404-1">)</span><span class="w">
</span><span class="n">post</span><span class="p" data-group-id="4410219404-3">(</span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4410219404-4">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="4410219404-4">}</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4410219404-5">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="4410219404-5">]</span><span class="p" data-group-id="4410219404-3">)</span><span class="w">
</span><span class="n">post</span><span class="p" data-group-id="4410219404-6">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4410219404-7">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="4410219404-7">}</span><span class="p" data-group-id="4410219404-6">)</span><span class="w">
</span><span class="n">post</span><span class="p" data-group-id="4410219404-8">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4410219404-9">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="4410219404-9">}</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4410219404-10">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="4410219404-10">]</span><span class="p" data-group-id="4410219404-8">)</span></code></pre>
  </section>
</section>
<section class="detail" id="put!/4">

  <div class="detail-header">
    <a href="#put!/4" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">put!(client, url, body, opts)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L8" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> put!(<a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:client/0">Tesla.Env.client</a>(), <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:url/0">Tesla.Env.url</a>(), <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:body/0">Tesla.Env.body</a>(), [<a href="#t:option/0">option</a>()]) ::
  <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:t/0">Tesla.Env.t</a>() | <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">no_return</a>()</pre>

      </div>

<p>Perform a PUT request.</p><p>See <a href="#request!/1"><code class="inline">request!/1</code></a> or <a href="#request!/2"><code class="inline">request!/2</code></a> for options definition.</p><pre><code class="makeup elixir" translate="no"><span class="n">put!</span><span class="p" data-group-id="4045500702-1">(</span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4045500702-2">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="4045500702-2">}</span><span class="p" data-group-id="4045500702-1">)</span><span class="w">
</span><span class="n">put!</span><span class="p" data-group-id="4045500702-3">(</span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4045500702-4">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="4045500702-4">}</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4045500702-5">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="4045500702-5">]</span><span class="p" data-group-id="4045500702-3">)</span><span class="w">
</span><span class="n">put!</span><span class="p" data-group-id="4045500702-6">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4045500702-7">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="4045500702-7">}</span><span class="p" data-group-id="4045500702-6">)</span><span class="w">
</span><span class="n">put!</span><span class="p" data-group-id="4045500702-8">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4045500702-9">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="4045500702-9">}</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4045500702-10">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="4045500702-10">]</span><span class="p" data-group-id="4045500702-8">)</span></code></pre>
  </section>
</section>
<section class="detail" id="put/4">

  <div class="detail-header">
    <a href="#put/4" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">put(client, url, body, opts)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L8" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> put(<a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:client/0">Tesla.Env.client</a>(), <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:url/0">Tesla.Env.url</a>(), <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:body/0">Tesla.Env.body</a>(), [<a href="#t:option/0">option</a>()]) ::
  <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:result/0">Tesla.Env.result</a>()</pre>

      </div>

<p>Perform a PUT request.</p><p>See <a href="#request/1"><code class="inline">request/1</code></a> or <a href="#request/2"><code class="inline">request/2</code></a> for options definition.</p><pre><code class="makeup elixir" translate="no"><span class="n">put</span><span class="p" data-group-id="5797940198-1">(</span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5797940198-2">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="5797940198-2">}</span><span class="p" data-group-id="5797940198-1">)</span><span class="w">
</span><span class="n">put</span><span class="p" data-group-id="5797940198-3">(</span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5797940198-4">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="5797940198-4">}</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5797940198-5">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="5797940198-5">]</span><span class="p" data-group-id="5797940198-3">)</span><span class="w">
</span><span class="n">put</span><span class="p" data-group-id="5797940198-6">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5797940198-7">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="5797940198-7">}</span><span class="p" data-group-id="5797940198-6">)</span><span class="w">
</span><span class="n">put</span><span class="p" data-group-id="5797940198-8">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5797940198-9">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="5797940198-9">}</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5797940198-10">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="5797940198-10">]</span><span class="p" data-group-id="5797940198-8">)</span></code></pre>
  </section>
</section>
<section class="detail" id="request!/2">

    <span id="request!/1"></span>

  <div class="detail-header">
    <a href="#request!/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">request!(client \\ %Tesla.Client{}, options)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L8" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> request!(<a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:client/0">Tesla.Env.client</a>(), [<a href="#t:option/0">option</a>()]) :: <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:t/0">Tesla.Env.t</a>() | <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">no_return</a>()</pre>

      </div>

<p>Perform request and raise in case of error.</p><p>This is similar to <a href="#request/2"><code class="inline">request/2</code></a> behaviour from Tesla 0.x</p><p>See <a href="#request/2"><code class="inline">request/2</code></a> for list of available options.</p>
  </section>
</section>
<section class="detail" id="request/2">

    <span id="request/1"></span>

  <div class="detail-header">
    <a href="#request/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">request(client \\ %Tesla.Client{}, options)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L8" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> request(<a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:client/0">Tesla.Env.client</a>(), [<a href="#t:option/0">option</a>()]) :: <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:result/0">Tesla.Env.result</a>()</pre>

      </div>

<p>Perform a request.</p><h2 id="request/2-options" class="section-heading">
  <a href="#request/2-options" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">options</p>
  </a>
  Options
</h2>
<ul><li><code class="inline">:method</code> - the request method, one of [<code class="inline">:head</code>, <code class="inline">:get</code>, <code class="inline">:delete</code>, <code class="inline">:trace</code>, <code class="inline">:options</code>, <code class="inline">:post</code>, <code class="inline">:put</code>, <code class="inline">:patch</code>]</li><li><code class="inline">:url</code> - either full url e.g. &quot;<a href="http://example.com/some/path%22">http://example.com/some/path&quot;</a> or just &quot;/some/path&quot; if using <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Middleware.BaseUrl.html"><code class="inline">Tesla.Middleware.BaseUrl</code></a></li><li><code class="inline">:query</code> - a keyword list of query params, e.g. <code class="inline">[page: 1, per_page: 100]</code></li><li><code class="inline">:headers</code> - a keyworld list of headers, e.g. <code class="inline">[{&quot;content-type&quot;, &quot;text/plain&quot;}]</code></li><li><code class="inline">:body</code> - depends on used middleware:<ul><li>by default it can be a binary</li><li>if using e.g. JSON encoding middleware it can be a nested map</li><li>if adapter supports it it can be a Stream with any of the above</li></ul></li><li><code class="inline">:opts</code> - custom, per-request middleware or adapter options</li></ul><h2 id="request/2-examples" class="section-heading">
  <a href="#request/2-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">examples</p>
  </a>
  Examples
</h2>
<pre><code class="makeup elixir" translate="no"><span class="nc">ExampleApi</span><span class="o">.</span><span class="n">request</span><span class="p" data-group-id="3103750234-1">(</span><span class="ss">method</span><span class="p">:</span><span class="w"> </span><span class="ss">:get</span><span class="p">,</span><span class="w"> </span><span class="ss">url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/users/path&quot;</span><span class="p" data-group-id="3103750234-1">)</span><span class="w">

</span><span class="c1"># use shortcut methods</span><span class="w">
</span><span class="nc">ExampleApi</span><span class="o">.</span><span class="n">get</span><span class="p" data-group-id="3103750234-2">(</span><span class="s">&quot;/users/1&quot;</span><span class="p" data-group-id="3103750234-2">)</span><span class="w">
</span><span class="nc">ExampleApi</span><span class="o">.</span><span class="n">post</span><span class="p" data-group-id="3103750234-3">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3103750234-4">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="3103750234-4">}</span><span class="p" data-group-id="3103750234-3">)</span></code></pre>
  </section>
</section>
<section class="detail" id="set_session_status/2">

  <div class="detail-header">
    <a href="#set_session_status/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">set_session_status(contact, status)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L636" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> set_session_status(<a href="Glific.Contacts.Contact.html#t:t/0">Glific.Contacts.Contact.t</a>() | [<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">non_neg_integer</a>()], <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>()) ::
  {:ok, <a href="Glific.Contacts.Contact.html#t:t/0">Glific.Contacts.Contact.t</a>()} | {:error, <a href="https://hexdocs.pm/ecto/3.7.2/Ecto.Changeset.html#t:t/0">Ecto.Changeset.t</a>()} | :ok</pre>

      </div>

<p>Set session status for opted in and opted out contacts</p>
  </section>
</section>
<section class="detail" id="trace!/3">

  <div class="detail-header">
    <a href="#trace!/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">trace!(client, url, opts)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L8" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> trace!(<a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:client/0">Tesla.Env.client</a>(), <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:url/0">Tesla.Env.url</a>(), [<a href="#t:option/0">option</a>()]) ::
  <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:t/0">Tesla.Env.t</a>() | <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">no_return</a>()</pre>

      </div>

<p>Perform a TRACE request.</p><p>See <a href="#request!/1"><code class="inline">request!/1</code></a> or <a href="#request!/2"><code class="inline">request!/2</code></a> for options definition.</p><pre><code class="makeup elixir" translate="no"><span class="n">trace!</span><span class="p" data-group-id="2553129314-1">(</span><span class="s">&quot;/users&quot;</span><span class="p" data-group-id="2553129314-1">)</span><span class="w">
</span><span class="n">trace!</span><span class="p" data-group-id="2553129314-2">(</span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2553129314-3">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="2553129314-3">]</span><span class="p" data-group-id="2553129314-2">)</span><span class="w">
</span><span class="n">trace!</span><span class="p" data-group-id="2553129314-4">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p" data-group-id="2553129314-4">)</span><span class="w">
</span><span class="n">trace!</span><span class="p" data-group-id="2553129314-5">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2553129314-6">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="2553129314-6">]</span><span class="p" data-group-id="2553129314-5">)</span><span class="w">
</span><span class="n">trace!</span><span class="p" data-group-id="2553129314-7">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">body</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2553129314-8">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="2553129314-8">}</span><span class="p" data-group-id="2553129314-7">)</span></code></pre>
  </section>
</section>
<section class="detail" id="trace/3">

  <div class="detail-header">
    <a href="#trace/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">trace(client, url, opts)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L8" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> trace(<a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:client/0">Tesla.Env.client</a>(), <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:url/0">Tesla.Env.url</a>(), [<a href="#t:option/0">option</a>()]) :: <a href="https://hexdocs.pm/tesla/1.4.4/Tesla.Env.html#t:result/0">Tesla.Env.result</a>()</pre>

      </div>

<p>Perform a TRACE request.</p><p>See <a href="#request/1"><code class="inline">request/1</code></a> or <a href="#request/2"><code class="inline">request/2</code></a> for options definition.</p><pre><code class="makeup elixir" translate="no"><span class="n">trace</span><span class="p" data-group-id="4849591541-1">(</span><span class="s">&quot;/users&quot;</span><span class="p" data-group-id="4849591541-1">)</span><span class="w">
</span><span class="n">trace</span><span class="p" data-group-id="4849591541-2">(</span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4849591541-3">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="4849591541-3">]</span><span class="p" data-group-id="4849591541-2">)</span><span class="w">
</span><span class="n">trace</span><span class="p" data-group-id="4849591541-4">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p" data-group-id="4849591541-4">)</span><span class="w">
</span><span class="n">trace</span><span class="p" data-group-id="4849591541-5">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4849591541-6">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="4849591541-6">]</span><span class="p" data-group-id="4849591541-5">)</span><span class="w">
</span><span class="n">trace</span><span class="p" data-group-id="4849591541-7">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">body</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4849591541-8">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="4849591541-8">}</span><span class="p" data-group-id="4849591541-7">)</span></code></pre>
  </section>
</section>
<section class="detail" id="update_contact/2">

  <div class="detail-header">
    <a href="#update_contact/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">update_contact(contact, attrs)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L234" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> update_contact(<a href="Glific.Contacts.Contact.html#t:t/0">Glific.Contacts.Contact.t</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()) ::
  {:ok, <a href="Glific.Contacts.Contact.html#t:t/0">Glific.Contacts.Contact.t</a>()} | {:error, <a href="https://hexdocs.pm/ecto/3.7.2/Ecto.Changeset.html#t:t/0">Ecto.Changeset.t</a>()}</pre>

      </div>

<p>Updates a contact.</p><h2 id="update_contact/2-examples" class="section-heading">
  <a href="#update_contact/2-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">examples</p>
  </a>
  Examples
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">update_contact</span><span class="p" data-group-id="2295414441-1">(</span><span class="n">contact</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2295414441-2">%{</span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="n">new_value</span><span class="p" data-group-id="2295414441-2">}</span><span class="p" data-group-id="2295414441-1">)</span><span class="w">
</span><span class="p" data-group-id="2295414441-3">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2295414441-4">%</span><span class="nc" data-group-id="2295414441-4">Contact</span><span class="p" data-group-id="2295414441-4">{</span><span class="p" data-group-id="2295414441-4">}</span><span class="p" data-group-id="2295414441-3">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">update_contact</span><span class="p" data-group-id="2295414441-5">(</span><span class="n">contact</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2295414441-6">%{</span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="n">bad_value</span><span class="p" data-group-id="2295414441-6">}</span><span class="p" data-group-id="2295414441-5">)</span><span class="w">
</span><span class="p" data-group-id="2295414441-7">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2295414441-8">%</span><span class="nc" data-group-id="2295414441-8">Ecto.Changeset</span><span class="p" data-group-id="2295414441-8">{</span><span class="p" data-group-id="2295414441-8">}</span><span class="p" data-group-id="2295414441-7">}</span></code></pre>
  </section>
</section>
<section class="detail" id="update_contact_status/2">

  <div class="detail-header">
    <a href="#update_contact_status/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">update_contact_status(organization_id, args)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L619" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> update_contact_status(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">non_neg_integer</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()) :: :ok</pre>

      </div>

<p>Invoked from cron jobs to mass update the status of contacts belonging to
a specific organization</p><p>In this case, if we can, we might want to do it across the entire DB since the
update is across all organizations. The main issue might be the row level security
of postgres and how it ties in. For now, lets stick to per organization</p>
  </section>
</section>
<section class="detail" id="upsert/1">

  <div class="detail-header">
    <a href="#upsert/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">upsert(attrs)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific/contacts.ex#L296" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> upsert(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()) :: {:ok, <a href="Glific.Contacts.Contact.html#t:t/0">Glific.Contacts.Contact.t</a>()}</pre>

      </div>

<p>Gets or Creates a Contact based on the unique indexes in the table. If there is a match
it returns the existing contact, else it creates a new one</p>
  </section>
</section>

    </div>
  </section>

      <footer class="footer">

          <p>
            On Hex.pm:

            <span class="line">
              <a href="https://hex.pm/packages/glific/4.3.0" class="line footer-hex-package">Package</a>
              <a href="https://preview.hex.pm/preview/glific/4.3.0" class="line">Preview</a>

                <a href="https://preview.hex.pm/preview/glific/4.3.0/show/lib/glific/contacts.ex">(current file)</a>

            </span>

            <button class="line footer-button display-quick-switch">
              Search
            </button>
          </p>

        <p>
          Built using
          <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.28.3) for the
          <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>
        </p>
      </footer>
    </div>
  </div>
</section>
</div>


  </body>
</html>
