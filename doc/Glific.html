<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.28.4">
    <meta name="project" content="Glific v4.6.8">

    <title>Glific — Glific v4.6.8</title>
    <link rel="stylesheet" href="dist/elixir-b6f1ed5df9b1d42a7309.css" />

    <script src="dist/sidebar_items-45c50d407b.js"></script>

      <script src="docs_config.js"></script>

    <script async src="dist/app-bd1cb213813bf4825aa2.js"></script>


  </head>
  <body data-type="modules">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>

<div class="main">


<section class="sidebar">
  <button class="sidebar-button sidebar-toggle" aria-label="toggle sidebar">
    <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
  </button>

  <form class="sidebar-search" action="search.html">
    <button type="submit" class="search-button" aria-label="Submit Search">
      <i class="ri-search-2-line" aria-hidden="true" title="Submit search"></i>
    </button>
    <button type="button" tabindex="-1" class="search-close-button" aria-label="Cancel Search">
      <i class="ri-close-line ri-lg" aria-hidden="true" title="Cancel search"></i>
    </button>
    <label class="search-label">
      <p class="sr-only">Search</p>
      <input name="q" type="text" class="search-input" placeholder="Search..." aria-label="Input your search terms" autocomplete="off" />
    </label>
  </form>

  <div class="autocomplete">
    <div class="autocomplete-results">
    </div>
  </div>

  <div class="sidebar-header">

    <div class="sidebar-projectDetails">
      <a href="https://glific.io" class="sidebar-projectName" translate="no">
Glific
      </a>
      <strong class="sidebar-projectVersion" translate="no">
        v4.6.8
      </strong>
    </div>
    <ul class="sidebar-listNav">
      <li><a id="extras-list-link" href="#full-list">Pages</a></li>

        <li><a id="modules-list-link" href="#full-list">Modules</a></li>


    </ul>
  </div>

  <div class="gradient"></div>
  <ul id="full-list" class="sidebar-fullList"></ul>
</section>

<section class="content">
  <output role="status" id="toast"></output>
  <div class="content-outer">
    <div id="content" class="content-inner">

<h1>
<button class="settings display-settings">
  <i class="ri-settings-3-line"></i>
  <span class="sr-only">Settings</span>
</button>


    <a href="https://github.com/glific/glific/blob/main/lib/glific.ex#L1" title="View Source" class="view-source" rel="help">
      <i class="ri-code-s-slash-line" aria-hidden="true"></i>
      <span class="sr-only">View Source</span>
    </a>

  <span translate="no">Glific</span> 
  <small class="app-vsn" translate="no">(Glific v4.6.8)</small>

</h1>


  <section id="moduledoc">
<p>Glific keeps the contexts that define your domain
and business logic.</p><p>Contexts are also responsible for managing your data, regardless
if it comes from the database, an external API or others.</p><p>For now we'll keep some commonly used functions here, until we need
a new file</p>
  </section>


  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
        <span class="sr-only">Link to this section</span>
      </a>
      Summary
    </h1>

  <div class="summary-functions summary">
    <h2>
      <a href="#functions">Functions</a>
    </h2>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#atomize_keys/1" translate="no">atomize_keys(map)</a>

        </div>

          <div class="summary-synopsis"><p>Convert map string keys to :atom keys</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#delete_multiple/2" translate="no">delete_multiple(map, list)</a>

        </div>

          <div class="summary-synopsis"><p>Delete multiple items from the map</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#execute_eex/1" translate="no">execute_eex(content)</a>

        </div>

          <div class="summary-synopsis"><p>execute string in eex</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#go_back_time/3" translate="no">go_back_time(go_back, time \\ DateTime.utc_now(), unit \\ :hour)</a>

        </div>

          <div class="summary-synopsis"><p>Return a time object where you go back x units. We introduce the notion
of hour and minute</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#ignore_error?/1" translate="no">ignore_error?(error)</a>

        </div>

          <div class="summary-synopsis"><p>A hack to suppress error messages when running lots of flows. These are expected
and we want to improve signal &lt;-&gt; noise ratio</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#in_past_time/3" translate="no">in_past_time(time, units \\ :hours, back \\ 24)</a>

        </div>

          <div class="summary-synopsis"><p>See if the current time is within the past time units</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#log_error/2" translate="no">log_error(error, send_appsignal? \\ true)</a>

        </div>

          <div class="summary-synopsis"><p>Log the error and also send it over to our friends at appsignal</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#make_set/2" translate="no">make_set(str, seperators \\ [&quot;,&quot;, &quot;;&quot;])</a>

        </div>

          <div class="summary-synopsis"><p>Given a string seperated by spaces, commas, or semi-colons, create a set of individual
elements in the string</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#parse_maybe_integer!/1" translate="no">parse_maybe_integer!(value)</a>

        </div>

          <div class="summary-synopsis"><p>parse and integer and die if parse fails</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#parse_maybe_integer/1" translate="no">parse_maybe_integer(value)</a>

        </div>

          <div class="summary-synopsis"><p>Wrapper to return :ok/:error when parsing strings to potential integers</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#safe_string_to_atom/1" translate="no">safe_string_to_atom(value)</a>

        </div>

          <div class="summary-synopsis"><p>You shouldn’t really use String.to_atom/1 on user-supplied data.
The BEAM has a limit on how many different atoms you can have and they’re not garbage collected!
With data coming from outside the system, stick to strings or use String.to_existing_atom/1 instead!
So this is a generic function which will convert the string to atom and throws an error in case of invalid key</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#signature/3" translate="no">signature(organization_id, body, timestamp)</a>

        </div>

          <div class="summary-synopsis"><p>Compute the signature at a specific time for the body</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#stacktrace/0" translate="no">stacktrace()</a>

        </div>

          <div class="summary-synopsis"><p>easy way for glific developers to get a stacktrace when debugging</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#string_clean/1" translate="no">string_clean(str)</a>

        </div>

          <div class="summary-synopsis"><p>Lets get rid of all non valid characters. We are assuming any language and hence using unicode syntax
and not restricting ourselves to alphanumeric</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#string_snake_case/1" translate="no">string_snake_case(str)</a>

        </div>

          <div class="summary-synopsis"><p>convert string to snake case</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#substitute_organization_id/3" translate="no">substitute_organization_id(params, value, key)</a>

        </div>

          <div class="summary-synopsis"><p>Intermediary function to update the input params with organization id
as operation is performed by glific_admin for other organizations</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#suspicious_code/1" translate="no">suspicious_code(code)</a>

        </div>

          <div class="summary-synopsis"><p>Really simple function to ensure folks do not add Repo and/or IO calls
to an EEx snippet. This is an extremely short term fix to avoid shooting
ourselves in the foot, but we should move to lua for flows scripting in the
near future</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#validate_shortcode/1" translate="no">validate_shortcode(changeset)</a>

        </div>

          <div class="summary-synopsis"><p>Validates inputed shortcode, if shortcode is invalid it returns message that the shortcode is invalid
along with the valid shortcode.</p></div>

      </div>

  </div>

  </section>


  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
        <span class="sr-only">Link to this section</span>
      </a>
Functions
    </h1>
    <div class="functions-list">
<section class="detail" id="atomize_keys/1">

  <div class="detail-header">
    <a href="#atomize_keys/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">atomize_keys(map)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific.ex#L126" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> atomize_keys(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">any</a>()) :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">any</a>()</pre>

      </div>

<p>Convert map string keys to :atom keys</p>
  </section>
</section>
<section class="detail" id="delete_multiple/2">

  <div class="detail-header">
    <a href="#delete_multiple/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">delete_multiple(map, list)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific.ex#L231" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> delete_multiple(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">list</a>()) :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()</pre>

      </div>

<p>Delete multiple items from the map</p>
  </section>
</section>
<section class="detail" id="execute_eex/1">

  <div class="detail-header">
    <a href="#execute_eex/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">execute_eex(content)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific.ex#L177" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> execute_eex(<a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>()) :: <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>()</pre>

      </div>

<p>execute string in eex</p>
  </section>
</section>
<section class="detail" id="go_back_time/3">

    <span id="go_back_time/1"></span>

    <span id="go_back_time/2"></span>

  <div class="detail-header">
    <a href="#go_back_time/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">go_back_time(go_back, time \\ DateTime.utc_now(), unit \\ :hour)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific.ex#L110" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> go_back_time(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">integer</a>(), <a href="https://hexdocs.pm/elixir/DateTime.html#t:t/0">DateTime.t</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>()) :: <a href="https://hexdocs.pm/elixir/DateTime.html#t:t/0">DateTime.t</a>()</pre>

      </div>

<p>Return a time object where you go back x units. We introduce the notion
of hour and minute</p>
  </section>
</section>
<section class="detail" id="ignore_error?/1">

  <div class="detail-header">
    <a href="#ignore_error?/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">ignore_error?(error)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific.ex#L279" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> ignore_error?(<a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>()) :: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">boolean</a>()</pre>

      </div>

<p>A hack to suppress error messages when running lots of flows. These are expected
and we want to improve signal &lt;-&gt; noise ratio</p>
  </section>
</section>
<section class="detail" id="in_past_time/3">

    <span id="in_past_time/1"></span>

    <span id="in_past_time/2"></span>

  <div class="detail-header">
    <a href="#in_past_time/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">in_past_time(time, units \\ :hours, back \\ 24)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific.ex#L102" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> in_past_time(<a href="https://hexdocs.pm/elixir/DateTime.html#t:t/0">DateTime.t</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">integer</a>()) :: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">boolean</a>()</pre>

      </div>

<p>See if the current time is within the past time units</p>
  </section>
</section>
<section class="detail" id="log_error/2">

    <span id="log_error/1"></span>

  <div class="detail-header">
    <a href="#log_error/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">log_error(error, send_appsignal? \\ true)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific.ex#L291" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> log_error(<a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">boolean</a>()) :: {:error, <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>()}</pre>

      </div>

<p>Log the error and also send it over to our friends at appsignal</p>
  </section>
</section>
<section class="detail" id="make_set/2">

    <span id="make_set/1"></span>

  <div class="detail-header">
    <a href="#make_set/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">make_set(str, seperators \\ [&quot;,&quot;, &quot;;&quot;])</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific.ex#L244" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> make_set(<a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">list</a>()) :: <a href="https://hexdocs.pm/elixir/MapSet.html#t:t/0">MapSet.t</a>()</pre>

      </div>

<p>Given a string seperated by spaces, commas, or semi-colons, create a set of individual
elements in the string</p>
  </section>
</section>
<section class="detail" id="parse_maybe_integer!/1">

  <div class="detail-header">
    <a href="#parse_maybe_integer!/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">parse_maybe_integer!(value)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific.ex#L44" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> parse_maybe_integer!(<a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>() | <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">integer</a>()) :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">integer</a>()</pre>

      </div>

<p>parse and integer and die if parse fails</p>
  </section>
</section>
<section class="detail" id="parse_maybe_integer/1">

  <div class="detail-header">
    <a href="#parse_maybe_integer/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">parse_maybe_integer(value)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific.ex#L26" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> parse_maybe_integer(<a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>() | <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">integer</a>()) ::
  {:ok, <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">integer</a>()} | {:ok, nil} | :error</pre>

      </div>

<p>Wrapper to return :ok/:error when parsing strings to potential integers</p>
  </section>
</section>
<section class="detail" id="safe_string_to_atom/1">

  <div class="detail-header">
    <a href="#safe_string_to_atom/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">safe_string_to_atom(value)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific.ex#L216" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> safe_string_to_atom(<a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>() | <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>()) :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>()</pre>

      </div>

<p>You shouldn’t really use String.to_atom/1 on user-supplied data.
The BEAM has a limit on how many different atoms you can have and they’re not garbage collected!
With data coming from outside the system, stick to strings or use String.to_existing_atom/1 instead!
So this is a generic function which will convert the string to atom and throws an error in case of invalid key</p>
  </section>
</section>
<section class="detail" id="signature/3">

  <div class="detail-header">
    <a href="#signature/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">signature(organization_id, body, timestamp)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific.ex#L200" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> signature(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">non_neg_integer</a>(), <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">non_neg_integer</a>()) :: <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>()</pre>

      </div>

<p>Compute the signature at a specific time for the body</p>
  </section>
</section>
<section class="detail" id="stacktrace/0">

  <div class="detail-header">
    <a href="#stacktrace/0" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">stacktrace()</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific.ex#L153" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> stacktrace() :: <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>()</pre>

      </div>

<p>easy way for glific developers to get a stacktrace when debugging</p>
  </section>
</section>
<section class="detail" id="string_clean/1">

  <div class="detail-header">
    <a href="#string_clean/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">string_clean(str)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific.ex#L77" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> string_clean(<a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>() | nil) :: <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>() | nil</pre>

      </div>

<p>Lets get rid of all non valid characters. We are assuming any language and hence using unicode syntax
and not restricting ourselves to alphanumeric</p>
  </section>
</section>
<section class="detail" id="string_snake_case/1">

  <div class="detail-header">
    <a href="#string_snake_case/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">string_snake_case(str)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific.ex#L90" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> string_snake_case(<a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>() | nil) :: <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>() | nil</pre>

      </div>

<p>convert string to snake case</p>
  </section>
</section>
<section class="detail" id="substitute_organization_id/3">

  <div class="detail-header">
    <a href="#substitute_organization_id/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">substitute_organization_id(params, value, key)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific.ex#L261" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> substitute_organization_id(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">any</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>()) :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()</pre>

      </div>

<p>Intermediary function to update the input params with organization id
as operation is performed by glific_admin for other organizations</p>
  </section>
</section>
<section class="detail" id="suspicious_code/1">

  <div class="detail-header">
    <a href="#suspicious_code/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">suspicious_code(code)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific.ex#L170" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> suspicious_code(<a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>()) :: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">boolean</a>()</pre>

      </div>

<p>Really simple function to ensure folks do not add Repo and/or IO calls
to an EEx snippet. This is an extremely short term fix to avoid shooting
ourselves in the foot, but we should move to lua for flows scripting in the
near future</p><p>Note that folks can potentially find other ways to access the same modules, so
this by no means should be considered remotely secure</p>
  </section>
</section>
<section class="detail" id="validate_shortcode/1">

  <div class="detail-header">
    <a href="#validate_shortcode/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">validate_shortcode(changeset)</h1>

      <a href="https://github.com/glific/glific/blob/main/lib/glific.ex#L58" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> validate_shortcode(<a href="https://hexdocs.pm/ecto/3.8.4/Ecto.Changeset.html#t:t/0">Ecto.Changeset.t</a>()) ::
  <a href="https://hexdocs.pm/ecto/3.8.4/Ecto.Changeset.html#t:t/0">Ecto.Changeset.t</a>() | <a href="https://hexdocs.pm/ecto/3.8.4/Ecto.Changeset.html#t:t/0">Ecto.Changeset.t</a>()</pre>

      </div>

<p>Validates inputed shortcode, if shortcode is invalid it returns message that the shortcode is invalid
along with the valid shortcode.</p>
  </section>
</section>

    </div>
  </section>

      <footer class="footer">

          <p>
            On Hex.pm:

            <span class="line">
              <a href="https://hex.pm/packages/glific/4.6.8" class="line footer-hex-package">Package</a>
              <a href="https://preview.hex.pm/preview/glific/4.6.8" class="line">Preview</a>

                <a href="https://preview.hex.pm/preview/glific/4.6.8/show/lib/glific.ex">(current file)</a>

            </span>

            <button class="line footer-button display-quick-switch">
              Search
            </button>
          </p>

        <p>
          Built using
          <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.28.4) for the

            <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

        </p>
      </footer>
    </div>
  </div>
</section>
</div>


  </body>
</html>
